<body></body>
<script>
var canvas=document.createElement('canvas');
canvas.width=canvas.height=1024;
var g=canvas.getContext('2d');
document.body.innerHTML='';
document.body.appendChild(canvas);
var size=100;
var arr=[];
for(var i=0;i<size;i++)arr[i]=[];
for(var i=0;i<size;i++){
  for(var j=0;j<size;j++){
    arr[i][j]={x:i+0.1+0.8*Math.random(),y:j+0.1+0.8*Math.random()}
  }
}
g.translate(512,512);
g.scale(40,40);
g.translate(-size/2,-size/2);
g.lineWidth=0.1;g.lineCap='round'
function triArea(a,b,c){
  var bx=b.x-a.x,by=b.y-a.y;
  var cx=c.x-a.x,cy=c.y-a.y;
  return (bx*cy-by*cx)/2;
}
for(var i=1;i<size-1;i++){
  for(var j=1;j<size-1;j++){
    var p00=arr[i+0][j+0];
    var p10=arr[i+1][j+0];
    var p01=arr[i+0][j+1];
    var p11=arr[i+1][j+1];
    var prob=0.5;
    var lines=[];
    lines.push([p00,p01]);
    lines.push([p00,p10]);
    var sa=triArea(p00,p10,p01);
    var sb=triArea(p11,p01,p10);
    var sc=triArea(p10,p11,p00);
    var sd=triArea(p01,p00,p11);
    var s=(sa+sb+sc+sd)/2;
    if(Math.abs(sa/s-0.5)>Math.abs(sc/s-0.5)){
      lines.push([p00,p11]);
    }else{
      lines.push([p10,p01]);
    }
    g.beginPath();
    lines.forEach(function(l){
      if(Math.random()>prob)return;
      g.moveTo(l[0].x,l[0].y);g.lineTo(l[1].x,l[1].y);
    })
    g.stroke();
  }
}
</script>